<!DOCTYPE html>
<html>
	<head>
		<!-- Creative title for creative people. -->
		<title>Auto Budget</title>

		<!-- Highcharts CDN and fallback -->
		<script src="https://code.highcharts.com/highcharts.src.js"></script>
		<script type="text/javascript">
			window.Highcharts || document.write('<script src="src/js/highcharts/highcharts.js">\x3C/script>')
		</script>
	</head>

	<!-- Fallback for unsupported web browsers -->
	<body>
		<p>Hi! You're using an old, unsupported web browser.</p>

		<p>
			Please make sure your current browser is up to date to the most recent version, or try using one of the ones
			linked below to get started with the full web experience. Thank you, and sorry for the inconvenience!
		</p>
	</body>

	<footer>
		<!-- Main view code initialization -->
		<script type="module">
			import {init} from './src/js/index.js';

			try {
				init(document.documentElement, window.Highcharts);
			} catch (e) {
				// TODO: Add more than just a console error log here lmfao.
				console.log('init function failed:', e);
			}
		</script>

		<!-- Fallback code initialization for browsers that do not support JavaScript modules. -->
		<script nomodule type="text/javascript">
			/**
			 * @author John Resig
			 *
			 * Code adapted from:
			 * https://johnresig.com/projects/flexible-javascript-events/
			 */

			/**
			 * Handler function for addEventListener for compatibility with ie8 and earlier.
			 *
			 * @param {Element} obj The DOM element that will have an event handler attached to it.
			 * @param {string} etype The name of the event that will be handled.
			 * @param {Function} fn The Event handler itself.
			 */
			function addEvent(obj, etype, fn) {
				// If we're on godforsaken ie8 or worse...
				if (obj.attachEvent) {
					// Save the handler we're passing to the object itself.
					obj['e' + etype + fn] = fn;

					// Capture the window.event object that is fired and pass it directly to the handler saved above.
					obj[type + fn] = function() {obj['e' + etype + fn](window.event);};

					// attachEvent the captured function above for proper execution of added event handler function.
					obj.attachEvent('on' + etype, obj[type + fn]);
				}

				// Otherwise, we're all set.
				else obj.addEventListener(etype, fn, false);
			}

			/**
			 * Handler function for removeEventListener for compatibility with ie8 and earlier.
			 * 
			 * @param {Element} obj The DOM element that will have an event handler removed from it.
			 * @param {string} etype The name of the event that will be removed.
			 * @param {Function} fn The Event handler to be removed.
			 */
			function removeEvent(obj, etype, fn) {
				// If we're on godforsaken ie8 or worse...
				if (obj.detachEvent) {
					obj.detachEvent('on' + etype, obj[etype + fn]);
					obj[etype + fn] = null;
				}

				// Otherwise, we're all set.
				else obj.removeEventListener(etype, fn, false);
			}
		</script>

		<script nomodule type="text/javascript">
			/**
			 * @author tacowhisperer
			 */

			// Build the fallback homepage for unsupported web browsers.
			addEvent(window, 'load', function(e) {
				// TODO: Build a module for this.
			});
		</script>
	</footer>
</html>
